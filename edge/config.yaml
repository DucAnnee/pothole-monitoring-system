# ============================================================================
# POTHOLE DETECTION AND AREA ESTIMATION - CONFIGURATION
# ============================================================================
# This file contains all configurable parameters for the pothole detection system.

# Model selection: "yolo" | "rfdetr"
model_type: "yolo"

# Video and Model paths
video:
  input_path: "assets/test_1.mp4"

models: 
  yolo:
    weights_path: "models/yolo11s.pt"
    confidence_threshold: 0.1
  rfdetr:
    weights_path: "models/rfdetr.pth"
    confidence_threshold: 0.25

# Detection region mask
detection_region:
  # Trapezoid coordinates in reference resolution.
  trapezoid_coords:
    - [0.4034, 0.5731]  # Top-Left
    - [0.5081, 0.5796]  # Top-Right
    - [0.6456, 0.7972]  # Bottom-Right
    - [0.3268, 0.7843]  # Bottom-Left

# Real-world calibration (Bird's eye view rectangle in cm)
bev_calibration:
  rectangle_coords: # in cm
    - [0, 1000]    # Top-Left 
    - [250, 1000]  # Top-Right 
    - [250, 0]     # Bottom-Right 
    - [0, 0]       # Bottom-Left 

# Camera calibration
camera:
  calibration_file: ".conf/camera_calibration.json"

# Output directories
output:
  segmentation_dir: "segmentation/results"
  area_estimation_dir: "surface_area/results"
  # Separate directories for RF-DETR (when using RF-DETR model)
  segmentation_dir_rfdetr: "segmentation/results_rfdetr"
  area_estimation_dir_rfdetr: "surface_area/results_rfdetr"

# Processing parameters
processing:
  frame_interval: 3  # Sampling rate
  enable_display: true  # Show real-time visualization window
  display_window_name: "Pothole Segmentation"

# Kafka configuration
kafka:
  topic: "pothole.raw.events.v1"
  bootstrap_servers: "localhost:19092,localhost:29092,localhost:39092"
  schema_registry_url: "http://localhost:8082"
  max_retries: 5
  retry_delay: 2

# MinIO configuration
minio:
  endpoint: "localhost:9000"
  access_key: "${MINIO_ACCESS_KEY:minioadmin}"
  secret_key: "${MINIO_SECRET_KEY:minioadmin}"
  bucket: "warehouse"
  prefix: "raw_images"
  secure: false
  max_retries: 5
  retry_delay: 2

# Uploader configuration
uploader:
  input_dir: "surface_area/results"  # Directory containing processed images and enriched JSON
  # image_path: ".assets/HCM-HN-01_frame_000001.jpg"
  upload_interval: 10  # seconds between uploads
  
# GPS simulation bounds (HCM City)
gps:
  lat_min: 10.7
  lat_max: 10.9
  lon_min: 106.6
  lon_max: 106.8

# Optional: API Endpoints (for future cloud integration)
# api:
#   endpoint: "https://api.example.com/potholes"
#   api_key: "${POTHOLE_API_KEY}"  # Use environment variable
#   timeout: 30

# Optional: Database Credentials (for future database integration)
# database:
#   host: "localhost"
#   port: 5432
#   name: "pothole_db"
#   user: "${DB_USER}"  # Use environment variable
#   password: "${DB_PASSWORD}"  # Use environment variable
